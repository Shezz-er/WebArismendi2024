{% extends "sitio/layout.html" %} {% load static%}

{% block content %}


<main class="container my-5">
    <div class="row justify-content-center  bloquedetalle ">

        <!-- TITULO -->
        <div class="col-12 mb-3">
            <h2 class="display-4 text-center text-capitalize">Carrito</h2>
        </div>

        <div class="col-6 row border">

            <!-- USUARIO -->
            
                <div class="col-12 p-0 mb-2">
                    <h3 class="display-4 text-capitalize mt-2 " style="font-size: 2em; font-weight: bold;">Hola, {{user.get_username}}.</h3>
                </div>

            <!-- PRODUCTOS -->
            {% for item in items_carrito %}
            <table class="table table-condensed table-bordered table-striped">
                <tr>             
                    <th>Descripci√≥n</th>
                    <th>Precio</th>
                    <th>Cantidad</th>
                    <th>Subtotal</th>
                    <th>Imagen</th>
                    
                    <th>Eliminar</th>
            
                </tr>
                <div class="col-12 p-0 m-0">
                    <p class="d-flex justify-content-between align-items-center">
                        
                        <td>{{item.producto.titulo.title}}</td>
                        <td>${{ item.producto.precio }}</td> 
                        <td><center>{{item.stock}}</center></td>
                        <td>${{item.subtotal}}</td>
                        <td scope="row"><img src="{{MEDIA_URL}}{{item.producto.imagen.url}}" style="height: 50px; width:50px; " alt="..."></td>
                        <td><a href="{% url 'SITIO:item_carrito_delete' item.id %}">
                        <center>
                        <button role="button" class="btn btn-danger mr-3 ">X</button></a></td>
                        <center>
                        
                    </p>
                </div>
            </table>
            {% empty %}
                <div class="col-12 p-0 m-0">
                    <p class="d-flex justify-content-between align-items-center">
                        No tiene ningun producto en el carrito
                    </p>
                </div>
            {% endfor %}
            
            {% for c in carrito %}
            <div class="col-12 p-0 m-0">
                <p class="d-flex justify-content-between align-items-center">
                    <table class="table table-condensed table-bordered table-striped">
                        <tr>
                            <th>Total</th>
                        </tr>
                        <td>${{c.total}}</td>
                    </table>
                </p>
            </div>
            {% endfor %}
          
           
            
           

            <!-- BOTONES -->
            <div class="col-12 p-0 m-0 my-3 row ">
                <div class="col-md-5 col-lg-3 p-0">
                    <a href="{% url 'SITIO:carrito_clean' %}" class="btn btn-danger btn-block">Vaciar Carrito</a>
                </div>
                <div class="col-12 p-0 col-md-7 col-lg-4 mt-2 mt-md-0 pl-md-3">
                    <a href="{% url 'SITIO:detalle' %}" class="btn btn-primary btn-block">Finalizar Compra</a>
                </div>

            </div>
        </div>

    </div>
</main>
{% endblock %}

